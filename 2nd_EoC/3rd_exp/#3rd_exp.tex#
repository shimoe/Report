\documentclass[11pt,a4paper]{jsarticle}
\usepackage[dvips]{graphicx}
\usepackage{fancyhdr}
\usepackage{here}
\setcounter{page}{0}
%

\begin{document}

\title{制御工学実験I\hspace{-0.1mm}I\hspace{-0.1mm}I \\ 熱伝導プロセスの制御}
\author{提出者 \\ 14104064 下松八重　宏太 \\ \\ 共同実験者 \\ 14101028 梶野　翔平 \\ 14104092 中島　美香 \\ 16104311 北山　拓夢}
\date{同定実験日 2016年12月21日 \\ 計算実験日 2017年1月8日 \\ 制御実験日 2017年1月8日 \\ 提出日 \today}



\maketitle
\thispagestyle{empty}
\newpage


\section{目的}
ここでは，熱交換器や強制貫流ボイラのような熱伝導プロセスの一つである加熱プロセス系を制御対象として，最短時間制御により温度を制御する方法を学ぶ．一般に熱伝導系は，長大バネの振動や建造物などにおける弾性振動と同様に，時間の他に空間を表す独立変数が必要な分布定数系として取り扱い，熱伝導系のある一点の温度に注目した大短時間制御系を構成する．

\section{実験装置の概要}
まず，実験装置は図\ref{fig1}のような構成になっている．上端がヒータによって加熱され，下端に放熱板が取り付けられている．また，温度測定用の熱電対を用いた測定システム，計算機及び変圧器から構成される．ヒータに供給される電力は変圧器によって調整可能であり，計算機によって測定温度の記録を行う． \\
次に，加熱プロセスの詳細を図\ref{fig2}に示す．加熱プロセスは銅棒の表面から熱が拡散されるのを抑えるため，保温用の綿が巻きつけられている．銅棒は上端から加熱され，放熱板につながる下端から冷却される．銅棒の各点の温度はシース型熱電対によって固定され，A/D変換器を経て計算機に記録される．

\section{原理}
  \subsection{制御対象の伝達関数}
  $x$[m]を銅棒におけるヒータからの距離，$t$[s]を時間，$\theta(x,t)$をその時の温度とする．初期条件$\theta_x(x,0) = 0$つまり温度勾配が$0$で，ステップ状の入力$Q_0(t) = Q_0$[J]が印加された場合，この系は次式で表現出来る事が知られている．
  \begin{equation}
   \theta(x,t) = \sum_{n = 1}^{\infty} 
    \frac{2}{\pi + 2b_n} 
    \frac{Q'_0 \sin(a_n x)}{x a_n^3} 
     \cos \{ a_n x(1-e^{-a_n^2 t}) \}
  \end{equation}
  ここで，$a_n$は$\tan(a_n \pi) = \frac{\alpha '}{a_n}$の解であり，また，
  \begin{eqnarray*}
   \alpha ' = \frac{\alpha L}{\pi}, \ b_n = \frac{\sin(2\pi a_n)}{4a_n}, \ Q'_0 = \frac{L^2 Q_0}{\pi^2 A_m K}
  \end{eqnarray*}
  である．ここで，$\alpha$は境界条件を表す定数，$A_m[{\rm m^2}]$は加熱棒の断面積，$L$[m]は加熱棒の長さ，$K[{\rm J/K \cdot m \cdot s}]$は加熱帽の熱伝導率である．式1は位置$x$と時間$t$の関数となるが，ここではある一点$x_0$，すなわち熱電対を取り付けた点に着目した集中定数系とみなし，その近似伝達関数を求める．なお，式1は厳密には無言級数の形で表されるが，三次以上の項は十分に小さいので二次系とみなせる．さらに本実験では簡単のため，近似伝達関数を一次遅れ＋むだ時間の形で導出する．このような近似を行っても実用上はほとんど問題なく，制御系の設計などの処理が簡便になるので，実システムの設計や運用にもよく用いられる．\\
  さて以下では，求めるプラントの伝達関数$G_p$を次式であ与え，同定実験により未知パラメータ$K_p,T_p,L_p$を決定することを考える．
  \begin{equation}
   G_p = \frac{K_p}{1+T_p s} e^{-L_p s}
  \end{equation}

  \subsection{未知パラメータの同定}
  本実験ではステップ応答法により未知パラメータの同定を行う．式2にステップ入力$Q_0(s) = A/s$を加えると，出力は
  \begin{equation}
   \theta (t) = A K_p \left(1-e^{-(t-L_p)/T_p}\right)
  \end{equation}
  となる．ここで$\Delta \theta (t) = \theta(t + h_1) - \theta(t) \ (h_1：データ処理用サンプリング周期)$を定義すると，
  \begin{equation}
   \theta(t) = AK_p \left( 1-e^{-h_1/T_p} \right) e^{-(t-L_p)/T_p}
  \end{equation}
  となる．さらに，$z(t) = \ln \Delta \theta (t)$とすると，
  \begin{equation}
   z(t) = -at+b, \ a = \frac{1}{T_p}, \ b = \ln \left( AK_p (1-e^{-h_1/T_p}) \right) + \frac{L_p}{T_p}
  \end{equation}
となる．すなわち，$z(t)$と$t$の関係がわかれば，時定数$t_p$を求めることが出来る．しかし，$K_p,L_p$の値は$b$の値がわかってしても，この条件のみから計算することは出来ない．そこで，$K_p$はシステムのゲイン，すなわち定常状態での入力信号と出力信号の比であることから，次のように考えられる．
\begin{equation}
 K_p = \frac{\theta(\infty) - \theta(0)}{A}
\end{equation}
ここで，$\theta(\infty)$は同定実験終了時の定常状態の温度，$\theta(0)$は実験開始時の初期温度，$A$は入力電力であり，式6より$K_p$を計算できる．

  \subsection{最短時間制御}
  特定の性能に対しては非線形動作の方が線形のものより優秀であることが知られている．ここでは実験に沿って一次遅れ系の最短時間制御について説明する． \\
  まず，一次遅れ系の伝達関数は
  \begin{equation}
   G_p = \frac{K_p}{1 + T_p s}
  \end{equation}
  で表される．このような系に対し，出力がある値まで最短の時間で到達することを考えよう．どのような入力に対しても，時定数は一定であるから，入力信号のゲインが大きければ大きいほど，出力がある値に到達する時間は短くなることがわかる．従って出力がある値に達するまで，対象となるシステムにおいて許容し得る最大の入力信号を加えるとよい． \\
  しかし，このままでは出力は定常状態に落ち着くまで増加を続ける．そこで，出力がある値に到達した時にある値に落ち着くような入力信号に切換，制御を達成しようと考える．この切り替えるタイミング(これを切り替え時間と呼ぶ)と切り替え後の入力を得るために，位相面軌道を使って解析する．\\
  次に式7で表される系のステップ応答を考える．入力を$U(s) = A/s$とおくと，その時の出力は
  \begin{equation}
   Y(s) = G_p(s)U(s) = \frac{AK_p}{s(1 + T_p s)}
  \end{equation}
  となる．式変形してラプラス変換すると，
  \begin{equation}
   y(t) + T_p \dot y(t) = AK_p
  \end{equation}
  が得られ，これを$/dot y(t)$について解くと，
  \begin{equation}
   \dot y(t) = -\frac{1}{T_p} y(t) + \frac{AK_p}{T_p}
  \end{equation}
  となる．これは$y(t)$の一次関数であるから，位相面($y(t) - /dot y(t)$平面)に軌跡を描くと図\ref{fig3}のようになる．\\
ここで，位相面軌道上の状態の移動方向を考える．状態が図\ref{fig3}の第一象限にあったとき(初期状態$V$)，移動速度$\dot y(t)$は正であるから，変位$y(t)$は増加する．従って状態は図の矢印方向に移動することがわかる．また，状態が第四象限にあった場合には移動速度$\dot y(t)$は負であるから，変位$y(t)$は減少し図の矢印方向に移動する．同様に第二，三象限についても考えると，直線上の全ての点は入力信号の大きさ$A$と制御対象のゲイン$K_p$によって決まる定常値$AK_p$に向かうことがわかる． \\
また，初期状態$V$が直線上にない場合の軌道を考える．入力がステップ状に変化した時の状況を位相平面上で考えると，$\dot y(t)$軸に並行な直線になる．つまり，図\ref{fig4}のような位相軌道を取る．簡単のために初期値を位相面の原点として，目標値へ最短時間で到達するために最大ステップ入力$A_{max}$を加える．すると状態は点$V$から点$W$に向かって移動を始める．状態が目標値(点$W$)へ達した瞬間，入力の大きさを$A_s$に切り替えると，状態は$\dot y(t)$軸に平行に移動し目標値$R$で定常状態に落ち着くと予想される．一次遅れ系においては入力がステップ状に変化した時，出力の傾きは瞬時に変化するから図の$W-R$間での所要時間は$0$である．よって状態が$0$から$R$まで最短時間で到達する経路は$0-V-W-R$である． \\
このような経路を通るような入力を考えるために経路を二つに分けて考える．$0$から点$W$までと点$W$から点$R$までで分けて考える．点$W$までは最大ステップ入力を加えた状態なので，最短時嘉納棟を実現する入力を以下のようにおく．
\begin{equation}
 u(t) = A_{max} \times 1(t) + \acute{u}(t)
\end{equation}
式11で$\acute{u}(t)$の形を決定すれば求める入力が得られる．点$W$に到達する時間を$T_W$とおくと，$0 < t < T_w$では$\acute{u}(t) = 0$．$T_W < t$では$u(t) = A_S \times 1(t)$なので，
\begin{equation}
 \acute{u}(t) = (A_S - A_{max})1(t)
\end{equation}
となる．以上より，
\begin{equation}
 u(t) = A_{max} \times 1(t) + (A_S - A_{max})1(t - T_W)
\end{equation}
と求まる．つまり最短時間制御を実現するためには，制御開始後$T_W$秒間は最大入力$A_{max}$を入力し，時刻$T_W$で入力を$A_S$に切り替えればいいことがわかる．\\
切り替え時間$T_W$は点$V-W$間の経過時間なので，速度$\dot y(t)$の式より
\begin{eqnarray}
 \dot y(t) & = &\frac{\mathrm{d}y(t)}{\mathrm{d}t} \\
 \mathrm{d}t & = &\frac{1}{\dot{y}} \mathrm{d}y
\end{eqnarray}
とであるので，両辺を$0$から$R$まで積分すれば，
\begin{eqnarray}
 T_W & = &\int_0^{T_W} dt = \int_0^R \frac{1}{\dot y} dy = \int_0^R \frac{T_p}{-y+AK_p} dy \\
 & = &-\left[ T_p \ln|-y + AK_p| \right]_0^R \\
 & = &-T_p( \ln|AK_p - R| - \in|AK_p|)
\end{eqnarray}
となり，切替時間$T_W$が計算できる．


 \section{実験方法}
  \subsection{同定実験}
  以下の手順に従って同定実験を行う．
   \begin{itemize}
    \item[1] 起動したA/D変換器操作ソフトのウィンドウ上部のサンプリング開始ボタンを押し，速やかに供給電力を50[W]に調整する．
    \item[2] ディスプレイに温度計測の時間経過及び温度グラフが表示されるので正常に計測されていることを確認する．
    \item[3] 各チャネルの温度が定常状態に収束したら供給電力を0[W]に調整する．
   \end{itemize}

  \subsection{計算実験}
\begin{itemize}
 \item[1] 各チャンネルごとの未知パラメータを導出する． 
 \item[2] 求めたパラメータを元に，伝達関数から微分方程式を解き時間応答を書く．同定実験結果と比較し，求めたパラメータが妥当であるか検討する．
 \item[3] 計算したパラメータを元に切り替え時間及び切り替え後の入力電圧を求める．
\end{itemize}

\subsection{制御実験}
\begin{itemize}
 \item[1] A/D変換器ソフトによって全チャネルの温度が計測されるので，制御しようとするチャネルの初期温度を計測し記録する．
 \item[2] 前の手順で測定した初期温度と目標温度，同定実験で求めたパラメータをもとに切り替え時間$T_\omega$，定常入力$A_s$を計算する．
 \item[3] すみやかに供給電力を50[w]に調節し，正常に計測されていることを確認する．
 \item[4] 切り替え時間になると同時に，設定した定常入力電圧にと調整する．
 \item[5] 温度が安定したら，サンプリング停止ボタンを押し計測データを保存する．
\end{itemize}

\section{結果}
  \subsection{同定実験}
  同定実験で得られたグラフを図\ref{fig5}に示す．

  \subsection{計算実験}
  チャネル5について未知パラメータを同定した．まず，計測結果にノイズが含まれているので平均を取るサンプル数は10として得られた計測データの移動平均を取った．また，定常状態における温度は計測データの最後20点における平均とした． \\
得られたデータより$\Delta \theta(t) = \theta(t + h_1) - \theta(t)$から$z(t) = \ln \Delta \theta(t)$を計算し，$t - z(t)$のグラフを作成する．


\subsection{制御実験}
制御実験で得られた

\section{考察}

\end{document}






